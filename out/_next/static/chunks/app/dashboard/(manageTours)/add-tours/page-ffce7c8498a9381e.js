(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4180],{9396:function(e,r,t){Promise.resolve().then(t.bind(t,8336))},8336:function(e,r,t){"use strict";var a=t(7437),o=t(6463),n=t(2265),s=t(8472),d=t(2609);r.default=()=>{let e=(0,o.useRouter)(),{refetchTours:r}=(0,d.Z)(),[t,l]=(0,n.useState)({title:"",location:"",country:"",ratings:0,cost:0,category:"",tourCount:0}),[u,c]=(0,n.useState)(null),[i,g]=(0,n.useState)(""),b=e=>{let{id:r,value:t}=e.target;l(e=>({...e,[r]:t}))},y=async a=>{a.preventDefault();let o=new FormData;o.append("title",t.title),o.append("location",t.location),o.append("country",t.country),o.append("ratings",t.ratings),o.append("cost",t.cost),o.append("category",t.category),o.append("tourCount",t.tourCount),u&&o.append("file",u);try{await s.Z.post("".concat("https://jmc-tours-backend.bdcare.vip","/api/v1/tours"),o,{headers:{"Content-Type":"multipart/form-data"}}),alert("Tour added successfully!"),r(),e.replace("/dashboard/all-tours")}catch(e){console.error("Error during posting tour:",e),alert("Failed to add tour.")}};return(0,a.jsxs)("section",{className:"max-w-4xl p-6 mx-auto bg-white rounded-md shadow-md dark:bg-gray-800",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-700 capitalize dark:text-white",children:"Add Tour"}),(0,a.jsxs)("form",{onSubmit:y,children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6 mt-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:"title",children:"Title"}),(0,a.jsx)("input",{id:"title",type:"text",value:t.title,onChange:b,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-200 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 focus:ring-blue-300 focus:ring-opacity-40 dark:focus:border-blue-300 focus:outline-none focus:ring"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:"location",children:"Location"}),(0,a.jsx)("input",{id:"location",type:"text",value:t.location,onChange:b,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-200 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 focus:ring-blue-300 focus:ring-opacity-40 dark:focus:border-blue-300 focus:outline-none focus:ring"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:"country",children:"Country"}),(0,a.jsx)("input",{id:"country",type:"text",value:t.country,onChange:b,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-200 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 focus:ring-blue-300 focus:ring-opacity-40 dark:focus:border-blue-300 focus:outline-none focus:ring"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:"ratings",children:"Ratings"}),(0,a.jsx)("input",{id:"ratings",type:"number",min:"0",max:"5",value:t.ratings,onChange:b,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-200 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 focus:ring-blue-300 focus:ring-opacity-40 dark:focus:border-blue-300 focus:outline-none focus:ring"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:"cost",children:"Cost"}),(0,a.jsx)("input",{id:"cost",type:"number",min:"0",value:t.cost,onChange:b,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-200 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 focus:ring-blue-300 focus:ring-opacity-40 dark:focus:border-blue-300 focus:outline-none focus:ring"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:"category",children:"Category"}),(0,a.jsxs)("select",{id:"category",value:t.category,onChange:b,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-200 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 focus:ring-blue-300 focus:ring-opacity-40 dark:focus:border-blue-300 focus:outline-none focus:ring",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select One"}),(0,a.jsx)("option",{value:"adventure",children:"Adventure"}),(0,a.jsx)("option",{value:"honeymoon",children:"Honeymoon"}),(0,a.jsx)("option",{value:"international",children:"International"}),(0,a.jsx)("option",{value:"popular",children:"Popular"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:"tourCount",children:"Tour Count"}),(0,a.jsx)("input",{id:"tourCount",type:"number",min:"0",value:t.tourCount,onChange:b,className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-200 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 focus:ring-blue-300 focus:ring-opacity-40 dark:focus:border-blue-300 focus:outline-none focus:ring"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-gray-700 dark:text-gray-200",htmlFor:"image",children:"Image"}),(0,a.jsx)("input",{onChange:e=>{let r=e.target.files[0];r?(c(r),g(URL.createObjectURL(r))):(c(null),g(""))},id:"image",type:"file",accept:"image/*",className:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-200 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 focus:ring-blue-300 focus:ring-opacity-40 dark:focus:border-blue-300 focus:outline-none focus:ring"}),i&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("img",{src:i,alt:"Preview",className:"w-32 h-32 object-cover border border-gray-200 rounded-md"})})]})]}),(0,a.jsx)("div",{className:"flex justify-end mt-6",children:(0,a.jsx)("button",{type:"submit",className:"px-8 py-2.5 leading-5 text-white transition-colors duration-300 transform bg-gray-700 rounded-md hover:bg-gray-600 focus:outline-none focus:bg-gray-600",children:"Save"})})]})]})}},2609:function(e,r,t){"use strict";t.d(r,{$:function(){return n}});var a=t(3191),o=t(5355);async function n(e){try{let r="".concat("https://jmc-tours-backend.bdcare.vip","/api/v1/tours/").concat(e);console.log("delete tours by id",e,r);let t=await fetch(r,{method:"DELETE",headers:{"Content-Type":"application/json"}});return console.log("delete tours frontend response",t),{status:t.status}}catch(e){return console.error("Error:",e.message),{status:404}}}r.Z=()=>{let e=(0,a.NL)(),{isLoading:r,error:t,data:n}=(0,o.a)({queryKey:["tours"],queryFn:()=>fetch("".concat("https://jmc-tours-backend.bdcare.vip","/api/v1/tours")).then(e=>e.json()),staleTime:3e5}),{tours:s,success:d}=n||{};return{isLoading:r,error:t,tours:s,success:d,refetchTours:()=>{e.invalidateQueries(["tours"])}}}}},function(e){e.O(0,[1336,5355,9236,2971,7023,1744],function(){return e(e.s=9396)}),_N_E=e.O()}]);