(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3244],{4485:function(e,t,o){var a={"./ckb.js":7087,"./cs.js":6779,"./da.js":4305,"./de.js":8342,"./en.js":9451,"./es.js":8359,"./fa.js":8987,"./fr.js":5268,"./he.js":3452,"./index.js":7462,"./it.js":5544,"./ja.js":8006,"./ko.js":6363,"./lv.js":1651,"./nl.js":8190,"./pl.js":8315,"./pt_br.js":2733,"./ro.js":35,"./ru.js":4138,"./se.js":4495,"./tr.js":791,"./ua.js":2468,"./ur.js":2360,"./zh_cn.js":3035};function s(e){return o(n(e))}function n(e){if(!o.o(a,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=n,e.exports=s,s.id=4485},3524:function(e,t,o){Promise.resolve().then(o.bind(o,2442))},2442:function(e,t,o){"use strict";var a=o(7437),s=o(2265),n=o(7348),l=o.n(n);o(2455);var r=o(6463),i=o(9966);t.default=e=>{let{blog:t}=e,o=(0,r.useRouter)(),{refetchBlogs:n}=(0,i.ZP)(),[c,u]=(0,s.useState)({title:"",content:"",seoDescriptions:"",category:"",tags:[],image:null});(0,s.useEffect)(()=>{t&&u({title:null==t?void 0:t.title,content:null==t?void 0:t.descriptions,seoDescriptions:null==t?void 0:t.seoDescriptions,category:null==t?void 0:t.category,tags:null==t?void 0:t.tags,image:null==t?void 0:t.image})},[t]);let d=async e=>{e.preventDefault();let a=new FormData;a.append("title",null==c?void 0:c.title),a.append("seoDescriptions",null==c?void 0:c.seoDescriptions),a.append("content",null==c?void 0:c.content),a.append("category",null==c?void 0:c.category),a.append("tags",JSON.stringify(null==c?void 0:c.tags)),(null==c?void 0:c.image)instanceof File&&(alert("image instanceof File"),a.append("image",null==c?void 0:c.image));try{let e=localStorage.getItem("token");if(!(await fetch("".concat("https://jmc-tours-backend.bdcare.vip","/api/v1/blogs/").concat(null==t?void 0:t._id),{method:"PUT",headers:{authorization:"Bearer ".concat(e)},body:a})).ok)throw Error("Failed to update location");await n(),o.push("/dashboard/all-blogs")}catch(e){console.error("Error updating blog:",e)}};return(0,a.jsx)("div",{children:(0,a.jsxs)("form",{onSubmit:d,children:[(0,a.jsxs)("div",{className:"blogFields",children:[(0,a.jsx)("input",{type:"text",placeholder:"Blog Title",value:c.title,onChange:e=>u(t=>({...t,title:e.target.value})),className:"outline-none border my-2 p-3 w-full"}),(0,a.jsxs)("div",{className:"border p-2 my-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,a.jsxs)("select",{value:c.category,onChange:e=>u(t=>({...t,category:e.target.value})),name:"category",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),["Adventure","Beach","Culture","Historical","Nature","Wildlife","Uncategorized"].map((e,t)=>(0,a.jsx)("option",{value:e,children:e},t))]})]}),c.image?null:(0,a.jsx)("div",{className:"flex justify-center my-4",children:(0,a.jsx)("img",{src:"".concat("https://jmc-tours-backend.bdcare.vip","/").concat(null==t?void 0:t.imagePath),alt:null==c?void 0:c.title,className:"max-w-full h-auto w-60 object-cover"})}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{u(t=>({...t,image:e.target.files[0]}))},className:"border p-2 w-full mt-2 mb-8"}),(0,a.jsx)(l(),{autoFocus:!0,placeholder:"Enter the content",width:"100%",height:"500",defaultValue:c.content,onChange:e=>{u(t=>({...t,content:e}))},setContents:c.content,setOptions:{font:["Arial","Comic Sans MS","Courier New","Impact","Georgia","Tahoma","Trebuchet MS","Verdana","Logical","Salesforce Sans","Garamond","Sans-Serif","Serif","Times New Roman","Helvetica"],fontSize:[8,10,12,14,16,18,20,22,24,26,28,30,32,36,42,55,60],popupDisplay:"local",buttonList:[["undo","redo"],["font","fontSize","formatBlock"],["textStyle","fontColor","hiliteColor","horizontalRule"],["bold","underline","italic","strike"],["subscript","superscript","removeFormat","blockquote"],["list","align","table","image","preview","video","audio"]]}})]}),(0,a.jsxs)("div",{className:"my-2",children:[(0,a.jsxs)("div",{className:"seoFields grid grid-cols-1 gap-4 my-8",children:[(0,a.jsx)("input",{type:"text",value:c.tags.join(","),onChange:e=>u(t=>({...t,tags:e.target.value.split(",")})),className:"border p-2",placeholder:"use comma(,) for tags"}),(0,a.jsx)("textarea",{value:c.seoDescriptions,onChange:e=>u(t=>({...t,seoDescriptions:e.target.value})),className:"border p-2 min-h-44",placeholder:"SEO descriptions"})]}),(0,a.jsx)("button",{type:"submit",className:"border p-3 bg-black text-white w-full",children:"Update Blog"})]})]})})}},9966:function(e,t,o){"use strict";o.d(t,{F$:function(){return n}});var a=o(3191),s=o(5355);async function n(e){try{let t="".concat("https://jmc-tours-backend.bdcare.vip","/api/v1/blogs/").concat(e);console.log("delete blog by id",e,t);let o=await fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}});return console.log("deleteBlogs frontend response",o),{status:o.status}}catch(e){return console.error("Error:",e.message),{status:404}}}t.ZP=e=>{let t=(0,a.NL)(),{isLoading:o,error:n,data:l}=(0,s.a)({queryKey:["blogs",e],queryFn:async()=>{let t=e?"".concat("https://jmc-tours-backend.bdcare.vip","/api/v1/blogs/categories/").concat(e):"".concat("https://jmc-tours-backend.bdcare.vip","/api/v1/blogs"),o=await fetch(t);if(!o.ok)throw Error("Network response was not ok");return o.json()},staleTime:3e5,enabled:!!e||void 0===e}),{blogs:r,success:i}=l||{};return{isLoading:o,error:n,blogs:r,success:i,refetchBlogs:()=>{t.invalidateQueries(["blogs"])}}}}},function(e){e.O(0,[8078,738,1336,5355,8275,2971,7023,1744],function(){return e(e.s=3524)}),_N_E=e.O()}]);