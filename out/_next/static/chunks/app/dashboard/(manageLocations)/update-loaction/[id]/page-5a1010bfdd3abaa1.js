(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7485],{2661:function(e,t,n){Promise.resolve().then(n.bind(n,9130))},6648:function(e,t,n){"use strict";n.d(t,{default:function(){return a.a}});var o=n(5601),a=n.n(o)},6463:function(e,t,n){"use strict";var o=n(1169);n.o(o,"usePathname")&&n.d(t,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}})},5601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return c},getImageProps:function(){return i}});let o=n(9920),a=n(497),r=n(8173),s=o._(n(1241));function i(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let c=r.Image},291:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return o}});let o=n(9920)._(n(2265)).default.createContext(null)},9130:function(e,t,n){"use strict";var o=n(7437),a=n(8669),r=n(6463),s=n(2265),i=n(6648);t.default=e=>{let{location:t}=e,n=(0,r.useRouter)(),{refetchLocations:c}=(0,a.Z)(),[u,l]=(0,s.useState)({name:"",image:"",description:"",category:"",tourCount:0});(0,s.useEffect)(()=>{t&&l({name:t.name,image:t.image,description:t.description,category:t.category,tourCount:t.tourCount})},[t]);let d=async e=>{e.preventDefault();let o=new FormData;o.append("name",u.name),u.image instanceof File&&o.append("file",u.image),o.append("description",u.description),o.append("category",u.category),o.append("tourCount",u.tourCount);try{let e=localStorage.getItem("token");if(!(await fetch("".concat("https://jmc-tours-backend.bdcare.vip","/api/v1/locations/").concat(t._id),{method:"PATCH",headers:{authorization:"Bearer ".concat(e)},body:o})).ok)throw Error("Failed to update location");await c(),n.push("/dashboard/all-locations")}catch(e){console.error(e)}};return(0,o.jsxs)("div",{className:"max-w-lg mx-auto p-4",children:[(0,o.jsx)("h1",{className:"text-xl font-semibold mb-4",children:"Update Location"}),(0,o.jsxs)("form",{onSubmit:d,encType:"multipart/form-data",className:"space-y-4",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,o.jsx)("input",{value:u.name,onChange:e=>l({...u,name:e.target.value}),type:"text",name:"name",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Image"}),(0,o.jsx)("input",{onChange:e=>l({...u,image:e.target.files[0]}),type:"file",accept:"image/*",className:"mt-1 block w-full",name:"image"}),u.image&&"string"==typeof u.image&&(0,o.jsx)("div",{className:"mt-2",children:(0,o.jsx)(i.default,{src:"".concat("https://jmc-tours-backend.bdcare.vip","/").concat(u.image),alt:"Current location image",width:200,height:150,className:"object-cover"})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,o.jsx)("textarea",{value:u.description,onChange:e=>l({...u,description:e.target.value}),rows:"4",name:"description",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,o.jsxs)("select",{value:u.category,onChange:e=>l({...u,category:e.target.value}),name:"category",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm",children:[(0,o.jsx)("option",{value:"",disabled:!0,children:"Select a category"}),(0,o.jsx)("option",{value:"Wildlife",children:"Wildlife"}),(0,o.jsx)("option",{value:"Adventure",children:"Adventure"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Tour Count"}),(0,o.jsx)("input",{value:u.tourCount,onChange:e=>l({...u,tourCount:e.target.value}),type:"number",name:"tourCount",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-1 focus:ring-indigo-500 sm:text-sm"})]}),(0,o.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-indigo-600 text-white font-semibold rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",children:"Submit"})]})]})}},8669:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});var o=n(3191),a=n(5355);async function r(e){try{let t="".concat("https://jmc-tours-backend.bdcare.vip","/api/v1/locations/").concat(e),n=await fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}});return console.log("deleteLocation frontend response",n.status),{status:n.status}}catch(e){return console.error("Error:",e.message),{status:404}}}t.Z=()=>{let e=(0,o.NL)(),{isLoading:t,error:n,data:r}=(0,a.a)({queryKey:["locations"],queryFn:()=>fetch("".concat("https://jmc-tours-backend.bdcare.vip","/api/v1/locations")).then(e=>e.json()),staleTime:3e5}),{locations:s,success:i}=r||{};return{isLoading:t,error:n,locations:s,success:i,refetchLocations:()=>{e.invalidateQueries(["locations"])}}}}},function(e){e.O(0,[1336,5355,8173,2971,7023,1744],function(){return e(e.s=2661)}),_N_E=e.O()}]);